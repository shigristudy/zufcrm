(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{44:function(t,a,e){"use strict";e.r(a);var o=e(1),r=e.n(o),s=e(2),n=e.n(s);function i(t,a,e,o,r,s,n){try{var i=t[s](n),l=i.value}catch(t){return void e(t)}i.done?a(l):Promise.resolve(l).then(o,r)}function l(t){return function(){var a=this,e=arguments;return new Promise((function(o,r){var s=t.apply(a,e);function n(t){i(s,o,r,n,l,"next",t)}function l(t){i(s,o,r,n,l,"throw",t)}n(void 0)}))}}var d={middleware:"auth",metaInfo:function(){return{title:"Edit Donation"}},data:function(){return{message:"",wooProducts:[],form:new n.a({edit_id:0,payment_type:"",donation_type:"",total_amount:0,date_of_donation:"",last_name:"",first_name:"",title:"Mr",gift_aid:"",city:"",country:"",postal_code:"",contact:"",email:"",address_line1:"",address_line2:"",donationsArray:[]})}},created:function(){this.getProjects(),this.getData("/api/donation/getSingleDonation/"+this.$route.params.id)},methods:{getData:function(t){var a=this;axios.get(t).then((function(t){a.form.edit_id=t.data.id,a.form.payment_type=t.data.payment_method,a.form.donation_type=t.data.donation_type,a.form.total_amount=t.data.total_amount,a.form.date_of_donation=t.data.donation_date,a.form.last_name=t.data.last_name,a.form.first_name=t.data.first_name,a.form.title=t.data.title,a.form.gift_aid=t.data.gift_aid,a.form.city=t.data.city,a.form.country=t.data.country,a.form.postal_code=t.data.postcode,a.form.contact=t.data.phone,a.form.email=t.data.email,a.form.address_line1=t.data.address_1,a.form.address_line2=t.data.address_2,console.log(t.data.items);var e=a;t.data.items.forEach((function(t,a){console.log(t,a),e.form.donationsArray.push({project:t.product_id,donation_type:t.donation_type,amount:t.total})})),a.calculateTotal()})).catch((function(t){console.log(t)}))},calculateTotal:function(){var t=0;this.form.donationsArray.forEach((function(a,e){t+=parseFloat(a.amount)})),this.form.total_amount=t},getProjects:function(){var t=this;return l(r.a.mark((function a(){return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:axios.get("/api/getProjects").then((function(a){t.wooProducts=a.data})).catch((function(t){console.log(t)}));case 1:case"end":return a.stop()}}),a)})))()},addNewRow:function(){this.form.donationsArray.push({project:"",donation_type:"",amount:0})},deleteRow:function(t){this.form.donationsArray.splice(t,1)},handleSubmit:function(){var t=this;return l(r.a.mark((function a(){var e;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.form.post("/api/donation/update");case 2:e=a.sent,t.message=e.data.message,t.$router.push({name:"donations"});case 5:case"end":return a.stop()}}),a)})))()}}},m=e(0),c=Object(m.a)(d,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"content-wrapper"},[e("div",{staticClass:"content-header row"},[e("div",{staticClass:"content-header-left col-md-9 col-12 mb-2"},[e("div",{staticClass:"row breadcrumbs-top"},[e("div",{staticClass:"col-12"},[e("h2",{staticClass:"content-header-title float-left mb-0"},[t._v("Edit Donation")]),t._v(" "),e("div",{staticClass:"breadcrumb-wrapper col-12"},[e("ol",{staticClass:"breadcrumb"},[e("li",{staticClass:"breadcrumb-item"},[e("router-link",{attrs:{to:{name:"donations"}}},[t._v("Donations")])],1),t._v(" "),t._m(0)])])])])])]),t._v(" "),e("div",{staticClass:"content-body"},[e("section",{staticClass:"card",attrs:{id:"description"}},[e("div",{staticClass:"card-content"},[e("div",{staticClass:"card-body"},[e("form",{on:{submit:function(a){return a.preventDefault(),t.handleSubmit(a)},keydown:function(a){return t.form.onKeydown(a)}}},[e("alert-success",{attrs:{form:t.form,message:t.message}}),t._v(" "),e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-6"},[e("h3",[t._v("Donor Details")]),t._v(" "),e("fieldset",{staticClass:"form-group"},[e("label",[t._v("Title")]),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.form.title,expression:"form.title"}],staticClass:"form-control",on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.form,"title",a.target.multiple?e:e[0])}}},[e("option",{attrs:{value:"Miss"}},[t._v("Miss")]),t._v(" "),e("option",{attrs:{value:"Mr"}},[t._v("Mr")]),t._v(" "),e("option",{attrs:{value:"Mrs"}},[t._v("Mrs")]),t._v(" "),e("option",{attrs:{value:"Ms"}},[t._v("Ms")]),t._v(" "),e("option",{attrs:{value:"Dr"}},[t._v("Dr")])])]),t._v(" "),e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-6"},[e("fieldset",{staticClass:"form-group"},[e("label",{attrs:{for:"first_name"}},[t._v("First Name")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.first_name,expression:"form.first_name"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("first_name")},attrs:{type:"text",id:"first_name",name:"first_name",placeholder:"First Name"},domProps:{value:t.form.first_name},on:{input:function(a){a.target.composing||t.$set(t.form,"first_name",a.target.value)}}}),t._v(" "),e("has-error",{attrs:{form:t.form,field:"first_name"}})],1)]),t._v(" "),e("div",{staticClass:"col-md-6"},[e("fieldset",{staticClass:"form-group"},[e("label",{attrs:{for:"last_name"}},[t._v("Last Name")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.last_name,expression:"form.last_name"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("last_name")},attrs:{type:"text",id:"last_name",name:"last_name",placeholder:"Last Name"},domProps:{value:t.form.last_name},on:{input:function(a){a.target.composing||t.$set(t.form,"last_name",a.target.value)}}}),t._v(" "),e("has-error",{attrs:{form:t.form,field:"last_name"}})],1)])]),t._v(" "),e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-6"},[e("fieldset",{staticClass:"form-group"},[e("label",{attrs:{for:"addressline1"}},[t._v("Address Line 1")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.address_line1,expression:"form.address_line1"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("address_line1")},attrs:{type:"text",id:"address_line1",name:"address_line1",placeholder:"Address Line 1"},domProps:{value:t.form.address_line1},on:{input:function(a){a.target.composing||t.$set(t.form,"address_line1",a.target.value)}}}),t._v(" "),e("has-error",{attrs:{form:t.form,field:"address_line1"}})],1)]),t._v(" "),e("div",{staticClass:"col-md-6"},[e("fieldset",{staticClass:"form-group"},[e("label",{attrs:{for:"addressline2"}},[t._v("Address Line 2")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.address_line2,expression:"form.address_line2"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("address_line2")},attrs:{type:"text",id:"address_line2",name:"address_line2",placeholder:"Address Line 3"},domProps:{value:t.form.address_line2},on:{input:function(a){a.target.composing||t.$set(t.form,"address_line2",a.target.value)}}}),t._v(" "),e("has-error",{attrs:{form:t.form,field:"address_line2"}})],1)])]),t._v(" "),e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-6"},[e("fieldset",{staticClass:"form-group"},[e("label",{attrs:{for:"city"}},[t._v("City")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.city,expression:"form.city"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("city")},attrs:{type:"text",id:"city",name:"city",placeholder:"City"},domProps:{value:t.form.city},on:{input:function(a){a.target.composing||t.$set(t.form,"city",a.target.value)}}}),t._v(" "),e("has-error",{attrs:{form:t.form,field:"city"}})],1)]),t._v(" "),e("div",{staticClass:"col-md-6"},[e("fieldset",{staticClass:"form-group"},[e("label",{attrs:{for:"postal_code"}},[t._v("Postcode")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.postal_code,expression:"form.postal_code"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("postal_code")},attrs:{type:"text",id:"postal_code",name:"postal_code",placeholder:"Postcode"},domProps:{value:t.form.postal_code},on:{input:function(a){a.target.composing||t.$set(t.form,"postal_code",a.target.value)}}}),t._v(" "),e("has-error",{attrs:{form:t.form,field:"postal_code"}})],1)])]),t._v(" "),e("fieldset",{staticClass:"form-group"},[e("label",{attrs:{for:"country"}},[t._v("Country")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.country,expression:"form.country"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("country")},attrs:{type:"text",id:"country",name:"country",placeholder:"Country (e.g GB, PK)"},domProps:{value:t.form.country},on:{input:function(a){a.target.composing||t.$set(t.form,"country",a.target.value)}}}),t._v(" "),e("has-error",{attrs:{form:t.form,field:"country"}})],1)]),t._v(" "),e("div",{staticClass:"col-md-6"},[e("h3",[t._v("Contact Details")]),t._v(" "),e("fieldset",{staticClass:"form-group"},[e("label",{attrs:{for:"email"}},[t._v("Email")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.email,expression:"form.email"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("email")},attrs:{type:"text",id:"email",name:"email",placeholder:"Email"},domProps:{value:t.form.email},on:{input:function(a){a.target.composing||t.$set(t.form,"email",a.target.value)}}}),t._v(" "),e("has-error",{attrs:{form:t.form,field:"email"}})],1),t._v(" "),e("fieldset",{staticClass:"form-group"},[e("label",{attrs:{for:"contact"}},[t._v("Contact")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.contact,expression:"form.contact"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("contact")},attrs:{type:"text",id:"contact",name:"contact",placeholder:"Contact"},domProps:{value:t.form.contact},on:{input:function(a){a.target.composing||t.$set(t.form,"contact",a.target.value)}}}),t._v(" "),e("has-error",{attrs:{form:t.form,field:"contact"}})],1),t._v(" "),e("h3",[t._v("Donation Details")]),t._v(" "),e("fieldset",{staticClass:"form-group"},[e("label",{attrs:{for:"date_of_donation"}},[t._v("Date of Donation")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.date_of_donation,expression:"form.date_of_donation"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("date_of_donation")},attrs:{type:"date",id:"date_of_donation",name:"date_of_donation",placeholder:"Date Of Donation"},domProps:{value:t.form.date_of_donation},on:{input:function(a){a.target.composing||t.$set(t.form,"date_of_donation",a.target.value)}}}),t._v(" "),e("has-error",{attrs:{form:t.form,field:"date_of_donation"}})],1),t._v(" "),e("fieldset",{staticClass:"form-group"},[e("label",{attrs:{for:"basicInput"}},[t._v("Payment Type")]),t._v(" "),"offline"==t.form.donation_type?e("select",{directives:[{name:"model",rawName:"v-model",value:t.form.payment_type,expression:"form.payment_type"}],staticClass:"form-control",on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.form,"payment_type",a.target.multiple?e:e[0])}}},[e("option",{attrs:{value:"Bank"}},[t._v("Bank")]),t._v(" "),e("option",{attrs:{value:"Cash"}},[t._v("Cash")]),t._v(" "),e("option",{attrs:{value:"Cheque"}},[t._v("Cheque")])]):e("input",{staticClass:"form-control",attrs:{readonly:""},domProps:{value:"ppec_paypal"==t.form.payment_type?"Paypal":t.capitalize(t.form.payment_type)}})]),t._v(" "),e("fieldset",{staticClass:"form-group"},[e("label",[t._v("Gift Aid")]),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.form.gift_aid,expression:"form.gift_aid"}],staticClass:"form-control",on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.form,"gift_aid",a.target.multiple?e:e[0])}}},[e("option",{attrs:{value:""}},[t._v("Please Select Gift Aid")]),t._v(" "),e("option",{attrs:{value:"no"}},[t._v("No")]),t._v(" "),e("option",{attrs:{value:"written"}},[t._v("Written")])])])])]),t._v(" "),e("table",{staticClass:"table table-bordered"},[t._m(1),t._v(" "),e("tbody",[t._l(t.form.donationsArray,(function(a,o){return e("tr",{key:o},[e("td",[e("fieldset",{staticClass:"form-group"},[e("label",[t._v(t._s(o+1))])])]),t._v(" "),e("td",[e("fieldset",{staticClass:"form-group"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.form.donationsArray[o].project,expression:"form.donationsArray[index].project"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("donationsArray."+o+".project")},on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.form.donationsArray[o],"project",a.target.multiple?e:e[0])}}},[t._m(2,!0),t._v(" "),t._l(t.wooProducts,(function(a){return e("option",{key:"woo_project"+a.product_id,domProps:{value:a.product_id}},[e("strong",[t._v(t._s(a.name))])])}))],2),t._v(" "),e("has-error",{attrs:{form:t.form,field:"donationsArray."+o+".project"}})],1)]),t._v(" "),e("td",[e("fieldset",{staticClass:"form-group"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.form.donationsArray[o].donation_type,expression:"form.donationsArray[index].donation_type"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("donationsArray."+o+".donation_type")},on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.form.donationsArray[o],"donation_type",a.target.multiple?e:e[0])}}},[t._m(3,!0),t._v(" "),e("option",{attrs:{value:"Sadaqahh"}},[t._v("Sadaqahh")]),t._v(" "),e("option",{attrs:{value:"Zakat"}},[t._v("Zakat")]),t._v(" "),e("option",{attrs:{value:"Fitrana"}},[t._v("Fitrana")])]),t._v(" "),e("has-error",{attrs:{form:t.form,field:"donationsArray."+o+".donation_type"}})],1)]),t._v(" "),e("td",[e("fieldset",{staticClass:"form-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.donationsArray[o].amount,expression:"form.donationsArray[index].amount"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("donationsArray."+o+".amount")},attrs:{type:"number",placeholder:"Amount"},domProps:{value:t.form.donationsArray[o].amount},on:{change:function(a){return t.calculateTotal()},input:function(a){a.target.composing||t.$set(t.form.donationsArray[o],"amount",a.target.value)}}}),t._v(" "),e("has-error",{attrs:{form:t.form,field:"donationsArray."+o+".amount"}})],1)]),t._v(" "),e("td",{staticClass:"text-center"},[e("fieldset",{staticClass:"form-group"},[t.form.donationsArray.length==o+1?e("i",{staticClass:"fa fa-plus",on:{click:function(a){return t.addNewRow()}}}):t._e(),t._v(" "),0!=o||t.form.donationsArray.length>1?e("i",{staticClass:"fa fa-remove",on:{click:function(a){return t.deleteRow(o)}}}):t._e()])])])})),t._v(" "),e("tr",[e("td",{staticClass:"text-right",attrs:{colspan:"4"}},[e("strong",[t._v("Total Amount: ")]),t._v(t._s(t.form.total_amount))])])],2)]),t._v(" "),e("div",{staticClass:"d-flex justify-content-between"},[e("button",{staticClass:"btn btn-secondary mr-1 mb-1 waves-effect waves-light",attrs:{type:"submit"}},[t._v("Back")]),t._v(" "),e("v-button",{attrs:{loading:t.form.busy,type:"primary"}},[t._v("Submit")])],1)],1)])])])])])}),[function(){var t=this.$createElement,a=this._self._c||t;return a("li",{staticClass:"breadcrumb-item"},[a("a",{attrs:{href:"#"}},[this._v("Edit")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("thead",{staticStyle:{background:"#ebe8e8"}},[e("tr",[e("th",[t._v("S#")]),t._v(" "),e("th",[t._v("Project")]),t._v(" "),e("th",[t._v("Donation Type")]),t._v(" "),e("th",[t._v("Amount")]),t._v(" "),e("th",{staticClass:"text-center"},[t._v("Action")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("option",{attrs:{value:""}},[a("strong",[this._v("Select Project")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("option",{attrs:{value:""}},[a("strong",[this._v("Select Type")])])}],!1,null,null,null);a.default=c.exports}}]);