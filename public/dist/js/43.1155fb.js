(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{61:function(t,e,r){"use strict";r.r(e);var s=r(1),i=r.n(s);function n(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return a(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var s=0,i=function(){};return{s:i,n:function(){return s>=t.length?{done:!0}:{done:!1,value:t[s++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o=!0,l=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return o=t.done,t},e:function(t){l=!0,n=t},f:function(){try{o||null==r.return||r.return()}finally{if(l)throw n}}}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,s=new Array(e);r<e;r++)s[r]=t[r];return s}function o(t,e,r,s,i,n,a){try{var o=t[n](a),l=o.value}catch(t){return void r(t)}o.done?e(l):Promise.resolve(l).then(s,i)}var l={data:function(){return{submitted:!1,allPermissions:[],role_id:0,extraParams:null,rolesPermissions:[],role:null}},created:function(){this.role_id=this.$route.params.record_id,this.getAllPermissionsWithGroup()},methods:{getAllPermissionsWithGroup:function(){var t=this;axios.post(this.AdminBaseUrl+"settings/permission/getAllPermissionsWithGroup",{role_id:this.role_id}).then((function(e){t.role=e.data.role_data,t.allPermissions=e.data.data,t.rolesPermissions=e.data.rolesPermissions}))},handleSubmit:function(){var t,e=this;return(t=i.a.mark((function t(){var r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.submitted=!0,r=$("#permission_form").serialize(),axios.post("/api/settings/permission/assignPermission",r).then((function(t){})).catch((function(t){console.log(t)})),t.next=5,e.$store.dispatch("permissions/fetchUserPermissions");case 5:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(s,i){var n=t.apply(e,r);function a(t){o(n,s,i,a,l,"next",t)}function l(t){o(n,s,i,a,l,"throw",t)}a(void 0)}))})()},alreadyGiven:function(t){var e,r=!1,s=n(this.rolesPermissions);try{for(s.s();!(e=s.n()).done;){t==e.value.permission.id&&(r=!0)}}catch(t){s.e(t)}finally{s.f()}return r}}},c=r(0),u=Object(c.a)(l,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"content-wrapper"},[r("div",{staticClass:"content-header row"},[r("div",{staticClass:"content-header-left col-md-9 col-12 mb-2"},[r("div",{staticClass:"row breadcrumbs-top"},[r("div",{staticClass:"col-12"},[r("h2",{staticClass:"content-header-title float-left mb-0"},[t._v("Assign Permissions")]),t._v(" "),r("div",{staticClass:"breadcrumb-wrapper col-12"},[r("ol",{staticClass:"breadcrumb"},[r("li",{staticClass:"breadcrumb-item"},[r("router-link",{attrs:{to:{name:"settings.permissions"}}},[t._v("Permissions")])],1)])])])])])]),t._v(" "),r("div",{staticClass:"content-body"},[r("section",{staticClass:"card",attrs:{id:"description"}},[r("div",{staticClass:"card-content"},[r("div",{staticClass:"card-body"},[r("form",{staticClass:"form",attrs:{id:"permission_form"},on:{submit:function(e){return e.preventDefault(),t.handleSubmit(e)}}},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.role_id,expression:"role_id"}],attrs:{type:"hidden",name:"role_id"},domProps:{value:t.role_id},on:{input:function(e){e.target.composing||(t.role_id=e.target.value)}}}),t._v(" "),r("div",{staticClass:"card-body"},t._l(t.allPermissions,(function(e,s){return r("div",{key:s,staticClass:"card card-custom gutter-b mb-0"},[r("div",{staticClass:"card-header pt-0"},[r("div",{staticClass:"form-group row",staticStyle:{width:"100% !important"}},[r("label",{staticClass:"col-8 col-form-label"},[t._v(t._s(e.display_name))]),t._v(" "),r("div",{staticClass:"col-4"},[r("span",{staticClass:"switch switch-icon"},[r("label",[r("input",{attrs:{type:"checkbox",name:"permissions[main]["+s+"]"},domProps:{checked:t.alreadyGiven(e.id),value:e.id}}),t._v(" "),r("span")])])])])])])})),0),t._v(" "),r("div",{staticClass:"card-footer d-flex justify-content-between"},[r("button",{staticClass:"btn btn-secondary",attrs:{type:"button"}},[r("router-link",{attrs:{to:{name:"roles"}}},[t._v("Back")])],1),t._v(" "),r("button",{staticClass:"btn btn-primary mr-2 float-right",attrs:{type:"submit"}},[t._v("Submit")])])])])])])])])}),[],!1,null,null,null);e.default=u.exports}}]);