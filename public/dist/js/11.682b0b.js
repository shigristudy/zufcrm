(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{122:function(t,e,a){"use strict";a(81)},123:function(t,e,a){(t.exports=a(5)(!1)).push([t.i,".pagination{justify-content:flex-end!important}.pagination .page-stats{align-items:center;margin-right:5px}.pagination i{color:#3273dc!important}",""])},143:function(t,e,a){"use strict";a(92)},144:function(t,e,a){(t.exports=a(5)(!1)).push([t.i,".dropdown .dropdown-menu .dropdown-item[data-v-9b535c62],.dropleft .dropdown-menu .dropdown-item[data-v-9b535c62],.dropright .dropdown-menu .dropdown-item[data-v-9b535c62],.dropup .dropdown-menu .dropdown-item[data-v-9b535c62]{padding:5px 10px}",""])},3:function(t,e,a){"use strict";var r={props:["columns","sortKey","sortOrders"],data:function(){return{select_all:!1}}},s=a(0),o=Object(s.a)(r,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("table",{staticClass:"table dataTable"},[a("thead",[a("tr",t._l(t.columns,(function(e){return a("th",{key:e.name,class:t.sortKey===e.name?t.sortOrders[e.name]>0?"sorting_asc":"sorting_desc":"sorting "+e.clasess},[e.checkable?a("span",[a("div",{staticClass:"custom-control custom-checkbox"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.select_all,expression:"select_all"}],staticClass:"custom-control-input",attrs:{type:"checkbox",id:"select_all_checkbox"},domProps:{checked:Array.isArray(t.select_all)?t._i(t.select_all,null)>-1:t.select_all},on:{click:function(e){return t.$emit("selectall",t.select_all)},change:function(e){var a=t.select_all,r=e.target,s=!!r.checked;if(Array.isArray(a)){var o=t._i(a,null);r.checked?o<0&&(t.select_all=a.concat([null])):o>-1&&(t.select_all=a.slice(0,o).concat(a.slice(o+1)))}else t.select_all=s}}}),t._v(" "),a("label",{staticClass:"custom-control-label",attrs:{for:"select_all_checkbox"}})])]):e.sortable?a("span",{on:{click:function(a){return t.$emit("sort",e.name)}}},[a("i",{staticClass:"feather icon-chevrons-down",class:1==t.sortOrders[e.name]?"icon-chevrons-down":"icon-chevrons-up"}),t._v("\n                    "+t._s(e.label)+"\n                ")]):a("span",[t._v("\n                    "+t._s(e.label)+"\n                ")])])})),0)]),t._v(" "),t._t("default")],2)}),[],!1,null,null,null);e.a=o.exports},4:function(t,e,a){"use strict";var r={props:["pagination","filtered"],created:function(){},methods:{isCurrentPage:function(t){return this.pagination.currentPage===t},changePage:function(t){t>this.pagination.lastPage&&(t=this.pagination.lastPage),this.pagination.currentPage=t,this.$emit("getpageData",t)}},computed:{}},s=(a(122),a(0)),o=Object(s.a)(r,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("nav",{attrs:{"aria-label":"Page navigation example"}},[a("ul",{staticClass:"pagination justify-content-center mt-2"},t._l(t.pagination.links,(function(e,r){return a("li",{key:r,staticClass:"page-item",class:t.isCurrentPage(e.label)?"active":"",on:{click:function(a){return a.preventDefault(),t.changePage(e.url)}}},[a("a",{staticClass:"page-link",domProps:{innerHTML:t._s(e.label)}})])})),0)])}),[],!1,null,null,null);e.a=o.exports},51:function(t,e,a){"use strict";a.r(e);var r=a(1),s=a.n(r),o=a(3),n=a(4),i=a(2),l=a.n(i);function d(t,e,a,r,s,o,n){try{var i=t[o](n),l=i.value}catch(t){return void a(t)}i.done?e(l):Promise.resolve(l).then(r,s)}var c={components:{datatable:o.a,pagination:n.a},middleware:"auth",metaInfo:function(){return{title:"Make A Claim"}},data:function(){var t={},e=[{label:"Action",name:"id"},{label:"Title",name:"title"},{label:"First Name",name:"first_name"},{label:"Last Name",name:"last_name"},{label:"House name or number",name:"address_1"},{label:"Postcode",name:"postcode"},{label:"Aggregated donations",name:"aggregated_donation"},{label:"Sponsored event",name:"event"},{label:"Donation Date",name:"donation_date",sortable:!0},{label:"Amount",name:"order_total",sortable:!0},{label:"Edit",name:"edit"}];return e.forEach((function(e){t[e.name]=-1})),{message:"",datatableID:"submitted_gift_aid_table",form:new l.a({selectedrows:[]}),order:new l.a({order_id:"",title:"",first_name:"",last_name:"",address_1:"",address_2:"",postcode:"",donation_date:"",order_total:""}),report:new l.a({title:"",note:""}),donations:[],columns:e,sortKey:"donation_date",sortOrders:t,perPage:["10","20","30","all"],tableData:{draw:0,length:10,search:"",column:0,dir:"desc"},pagination:{lastPage:"",currentPage:"",total:"",lastPageUrl:"",nextPageUrl:"",prevPageUrl:"",from:"",to:"",links:[]}}},methods:{openReportSubmitModal:function(){$("#modal_generate_report").modal("show")},handleSubmit:function(){var t,e=this;return(t=s.a.mark((function t(){var a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.order.post("/api/editOrderDetails");case 2:a=t.sent,e.order.reset(),$("#modal_edit_order").modal("hide"),e.message=a.data.message,e.getData();case 7:case"end":return t.stop()}}),t)})),function(){var e=this,a=arguments;return new Promise((function(r,s){var o=t.apply(e,a);function n(t){d(o,r,s,n,i,"next",t)}function i(t){d(o,r,s,n,i,"throw",t)}n(void 0)}))})()},editOrder:function(t){this.order.order_id=t.id,this.order.title=t.title,this.order.first_name=t.first_name,this.order.last_name=t.last_name,this.order.address_1=t.address_1,this.order.address_2=t.address_2,this.order.postcode=t.postcode,this.order.donation_date=this.formattedDateDDMMYY(t.donation_date),this.order.order_total=t.order_total,$("#modal_edit_order").modal("show")},exportCSV:function(){this.download_table_as_csv(this.datatableID,",",[0,10])},markSelectedAsRenew:function(){var t=this;this.$swal.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, Mark As New!"}).then((function(e){e.isConfirmed&&t.form.post("/api/markAllSelectedasNew").then((function(e){t.getData(),t.$swal.fire("Renewed!",e.data.message,"success")})).catch((function(t){console.log(t)}))}))},markSelectedAsClaimed:function(){var t=this;this.$swal.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, Mark As Claimed/Closed!"}).then((function(e){e.isConfirmed&&t.report.post("/api/markAllSelectedasClaimed").then((function(e){t.getData(),t.$swal.fire("Claimed!",e.data.message,"success"),$("#modal_generate_report").modal("hide")})).catch((function(t){console.log(t)}))}))},getData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/api/submittedGiftAidsList";this.tableData.draw++,axios.get(e,{params:this.tableData}).then((function(e){var a=e.data;t.tableData.draw==a.draw&&(t.donations=a.data.data,t.configPagination(a.data))})).catch((function(t){console.log(t)}))},sortBy:function(t){this.sortKey=t,this.sortOrders[t]=-1*this.sortOrders[t],this.tableData.column=this.getIndex(this.columns,"name",t),this.tableData.dir=1===this.sortOrders[t]?"asc":"desc",this.getData()}},created:function(){this.getData()}},m=(a(143),a(0)),u=Object(m.a)(c,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content-wrapper"},[t._m(0),t._v(" "),a("div",{staticClass:"content-body"},[a("section",{staticClass:"card",attrs:{id:"description"}},[a("div",{staticClass:"card-content"},[a("div",{staticClass:"card-body"},[a("alert-success",{attrs:{form:t.order,message:t.message}}),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[a("button",{staticClass:"btn btn-primary",on:{click:function(e){return t.exportCSV()}}},[t._v("Export")]),t._v(" "),t.form.selectedrows.length>0?a("button",{staticClass:"btn btn-success",on:{click:function(e){return t.markSelectedAsRenew()}}},[t._v("Renew Items")]):t._e()]),t._v(" "),a("div",{staticClass:"col-md-6"},[a("button",{staticClass:"btn btn-primary float-right",on:{click:function(e){return t.openReportSubmitModal()}}},[t._v("Close All Donations")])])]),t._v(" "),a("div",{staticClass:"row dataTables_wrapper mb-1"},[a("div",{staticClass:"col-sm-12 col-md-6"},[a("div",{staticClass:"dataTables_length"},[a("label",[t._v("Show "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.tableData.length,expression:"tableData.length"}],staticClass:"custom-select custom-select-sm form-control form-control-sm",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.tableData,"length",e.target.multiple?a:a[0])},function(e){return t.getData()}]}},t._l(t.perPage,(function(e,r){return a("option",{key:"datatable_"+r,domProps:{value:e}},[t._v("\n                      "+t._s(e)+"\n                    ")])})),0),t._v(" entries\n                ")])])]),t._v(" "),a("div",{staticClass:"col-sm-12 col-md-6"},[a("div",{staticClass:"dataTables_filter"},[a("label",[t._v("Search:"),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tableData.search,expression:"tableData.search"}],staticClass:"form-control form-control-sm",attrs:{type:"search",placeholder:"Search Table"},domProps:{value:t.tableData.search},on:{input:[function(e){e.target.composing||t.$set(t.tableData,"search",e.target.value)},function(e){return t.getData()}]}})])])])]),t._v(" "),a("div",{staticClass:"table-responsive"},[a("datatable",{staticClass:"table-striped",attrs:{id:t.datatableID,columns:t.columns,sortKey:t.sortKey,sortOrders:t.sortOrders},on:{sort:t.sortBy}},[a("tbody",t._l(t.donations,(function(e){return a("tr",{key:"donations"+e.id},[a("td",[a("fieldset",[a("div",{staticClass:"custom-control custom-checkbox"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.selectedrows,expression:"form.selectedrows"}],staticClass:"custom-control-input",attrs:{type:"checkbox",id:"customCheck"+e.id},domProps:{value:e.id,checked:Array.isArray(t.form.selectedrows)?t._i(t.form.selectedrows,e.id)>-1:t.form.selectedrows},on:{change:function(a){var r=t.form.selectedrows,s=a.target,o=!!s.checked;if(Array.isArray(r)){var n=e.id,i=t._i(r,n);s.checked?i<0&&t.$set(t.form,"selectedrows",r.concat([n])):i>-1&&t.$set(t.form,"selectedrows",r.slice(0,i).concat(r.slice(i+1)))}else t.$set(t.form,"selectedrows",o)}}}),t._v(" "),a("label",{staticClass:"custom-control-label",attrs:{for:"customCheck"+e.id}})])])]),t._v(" "),a("td",[t._v(t._s(e.title))]),t._v(" "),a("td",[t._v(t._s(e.first_name))]),t._v(" "),a("td",[t._v(t._s(e.last_name))]),t._v(" "),a("td",[t._v(t._s(e.address_1))]),t._v(" "),a("td",[t._v(t._s(t.formatePostal(e.postcode)))]),t._v(" "),a("td"),t._v(" "),a("td"),t._v(" "),a("td",[t._v(t._s(t.formattedDateDDMMYY(e.donation_date)))]),t._v(" "),a("td",[t._v(t._s(t.round2Fixed(e.order_total)))]),t._v(" "),a("td",[a("i",{staticClass:"fa fa-pencil-square-o",on:{click:function(a){return t.editOrder(e)}}})])])})),0)])],1),t._v(" "),a("pagination",{attrs:{pagination:t.pagination},on:{getpageData:t.getData,prev:function(e){return t.getData(t.pagination.prevPageUrl)},next:function(e){return t.getData(t.pagination.nextPageUrl)}}})],1)])]),t._v(" "),a("div",{staticClass:"modal fade text-left show",attrs:{id:"modal_generate_report",tabindex:"-1",role:"dialog","aria-labelledby":"modal_generate_report","aria-modal":"true"}},[a("div",{staticClass:"modal-dialog modal-dialog-scrollable",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[t._m(1),t._v(" "),a("div",{staticClass:"modal-body"},[a("form",{on:{submit:function(e){return e.preventDefault(),t.markSelectedAsClaimed(e)},keydown:function(e){return t.report.onKeydown(e)}}},[a("fieldset",{staticClass:"form-group"},[a("label",{attrs:{for:"report_title"}},[t._v("Title")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.report.title,expression:"report.title"}],staticClass:"form-control",class:{"is-invalid":t.report.errors.has("title")},attrs:{type:"text",id:"report_tite",name:"title",placeholder:"Report title"},domProps:{value:t.report.title},on:{input:function(e){e.target.composing||t.$set(t.report,"title",e.target.value)}}}),t._v(" "),a("has-error",{attrs:{form:t.report,field:"title"}})],1),t._v(" "),a("fieldset",{staticClass:"form-group"},[a("label",{attrs:{for:"note"}},[t._v("Note")]),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.report.note,expression:"report.note"}],staticClass:"form-control",class:{"is-invalid":t.report.errors.has("note")},attrs:{id:"note",name:"note",placeholder:"Note"},domProps:{value:t.report.note},on:{input:function(e){e.target.composing||t.$set(t.report,"note",e.target.value)}}}),t._v(" "),a("has-error",{attrs:{form:t.report,field:"note"}})],1),t._v(" "),a("div",{staticClass:"d-flex justify-content-between"},[a("button",{staticClass:"btn btn-secondary mr-1 mb-1 waves-effect waves-light",attrs:{type:"button","data-dismiss":"modal"}},[t._v("Cancel")]),t._v(" "),a("v-button",{attrs:{loading:t.report.busy,type:"primary"}},[t._v("Submit")])],1)])])])])]),t._v(" "),a("div",{staticClass:"modal fade text-left show",attrs:{id:"modal_edit_order",tabindex:"-1",role:"dialog","aria-labelledby":"modal_edit_order","aria-modal":"true"}},[a("div",{staticClass:"modal-dialog modal-dialog-scrollable",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[t._m(2),t._v(" "),a("div",{staticClass:"modal-body"},[a("form",{on:{submit:function(e){return e.preventDefault(),t.handleSubmit(e)},keydown:function(e){return t.order.onKeydown(e)}}},[a("fieldset",{staticClass:"form-group"},[a("label",{attrs:{for:"basicInput"}},[t._v("Title")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.order.title,expression:"order.title"}],staticClass:"form-control",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.order,"title",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"Mr"}},[t._v("Mr")]),t._v(" "),a("option",{attrs:{value:"Ms"}},[t._v("Ms")])])]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[a("fieldset",{staticClass:"form-group"},[a("label",{attrs:{for:"first_name"}},[t._v("First Name")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.order.first_name,expression:"order.first_name"}],staticClass:"form-control",class:{"is-invalid":t.order.errors.has("first_name")},attrs:{type:"text",id:"first_name",name:"first_name",placeholder:"First Name"},domProps:{value:t.order.first_name},on:{input:function(e){e.target.composing||t.$set(t.order,"first_name",e.target.value)}}}),t._v(" "),a("has-error",{attrs:{form:t.order,field:"first_name"}})],1)]),t._v(" "),a("div",{staticClass:"col-md-6"},[a("fieldset",{staticClass:"form-group"},[a("label",{attrs:{for:"last_name"}},[t._v("Last Name")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.order.last_name,expression:"order.last_name"}],staticClass:"form-control",class:{"is-invalid":t.order.errors.has("last_name")},attrs:{type:"text",id:"last_name",name:"last_name",placeholder:"Last Name"},domProps:{value:t.order.last_name},on:{input:function(e){e.target.composing||t.$set(t.order,"last_name",e.target.value)}}}),t._v(" "),a("has-error",{attrs:{form:t.order,field:"last_name"}})],1)])]),t._v(" "),a("fieldset",{staticClass:"form-group"},[a("label",{attrs:{for:"addressline1"}},[t._v("Address Line 1")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.order.address_1,expression:"order.address_1"}],staticClass:"form-control",class:{"is-invalid":t.order.errors.has("address_1")},attrs:{type:"text",id:"address_1",name:"address_1",placeholder:"Address Line 1"},domProps:{value:t.order.address_1},on:{input:function(e){e.target.composing||t.$set(t.order,"address_1",e.target.value)}}}),t._v(" "),a("has-error",{attrs:{form:t.order,field:"address_1"}})],1),t._v(" "),a("fieldset",{staticClass:"form-group"},[a("label",{attrs:{for:"address_2"}},[t._v("Address Line 2")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.order.address_2,expression:"order.address_2"}],staticClass:"form-control",class:{"is-invalid":t.order.errors.has("address_2")},attrs:{type:"text",id:"address_2",name:"address_2",placeholder:"Address Line 2"},domProps:{value:t.order.address_2},on:{input:function(e){e.target.composing||t.$set(t.order,"address_2",e.target.value)}}}),t._v(" "),a("has-error",{attrs:{form:t.order,field:"address_2"}})],1),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[a("fieldset",{staticClass:"form-group"},[a("label",{attrs:{for:"postcode"}},[t._v("Post code")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.order.postcode,expression:"order.postcode"}],staticClass:"form-control",class:{"is-invalid":t.order.errors.has("postcode")},attrs:{type:"text",id:"postcode",name:"postcode",placeholder:"Postal Code"},domProps:{value:t.order.postcode},on:{input:function(e){e.target.composing||t.$set(t.order,"postcode",e.target.value)}}}),t._v(" "),a("has-error",{attrs:{form:t.order,field:"postcode"}})],1)]),t._v(" "),a("div",{staticClass:"col-md-6"},[a("fieldset",{staticClass:"form-group"},[a("label",{attrs:{for:"donation_date"}},[t._v("Donation Date")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.order.donation_date,expression:"order.donation_date"}],staticClass:"form-control",class:{"is-invalid":t.order.errors.has("donation_date")},attrs:{type:"text",id:"donation_date",name:"donation_date",placeholder:"Donation date"},domProps:{value:t.order.donation_date},on:{input:function(e){e.target.composing||t.$set(t.order,"donation_date",e.target.value)}}}),t._v(" "),a("has-error",{attrs:{form:t.order,field:"donation_date"}})],1)])]),t._v(" "),a("fieldset",{staticClass:"form-group"},[a("label",{attrs:{for:"order_total"}},[t._v("Amount")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.order.order_total,expression:"order.order_total"}],staticClass:"form-control",class:{"is-invalid":t.order.errors.has("order_total")},attrs:{type:"text",id:"order_total",name:"order_total",placeholder:"Amount"},domProps:{value:t.order.order_total},on:{input:function(e){e.target.composing||t.$set(t.order,"order_total",e.target.value)}}}),t._v(" "),a("has-error",{attrs:{form:t.order,field:"order_total"}})],1),t._v(" "),a("div",{staticClass:"d-flex justify-content-between"},[a("button",{staticClass:"btn btn-secondary mr-1 mb-1 waves-effect waves-light",attrs:{type:"button","data-dismiss":"modal"}},[t._v("Cancel")]),t._v(" "),a("v-button",{attrs:{loading:t.order.busy,type:"primary"}},[t._v("Submit")])],1)])])])])])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"content-header row"},[e("div",{staticClass:"content-header-left col-md-9 col-12 mb-2"},[e("div",{staticClass:"row breadcrumbs-top"},[e("div",{staticClass:"col-12"},[e("h2",{staticClass:"content-header-title float-left mb-0"},[this._v("Gift Aids Generated")])])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"modal-header"},[e("h4",{staticClass:"modal-title"},[this._v("Generate Report")]),this._v(" "),e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"modal-header"},[e("h4",{staticClass:"modal-title"},[this._v("Edit Donar")]),this._v(" "),e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])])}],!1,null,"9b535c62",null);e.default=u.exports},81:function(t,e,a){var r=a(123);"string"==typeof r&&(r=[[t.i,r,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};a(6)(r,s);r.locals&&(t.exports=r.locals)},92:function(t,e,a){var r=a(144);"string"==typeof r&&(r=[[t.i,r,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};a(6)(r,s);r.locals&&(t.exports=r.locals)}}]);