(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{129:function(t,e,a){"use strict";a(85)},130:function(t,e,a){(t.exports=a(5)(!1)).push([t.i,".h3[data-v-400c40c9],h3[data-v-400c40c9]{color:#636363}",""])},43:function(t,e,a){"use strict";a.r(e);var o=a(1),r=a.n(o),s=a(2),n=a.n(s);function i(t,e,a,o,r,s,n){try{var i=t[s](n),l=i.value}catch(t){return void a(t)}i.done?e(l):Promise.resolve(l).then(o,r)}function l(t){return function(){var e=this,a=arguments;return new Promise((function(o,r){var s=t.apply(e,a);function n(t){i(s,o,r,n,l,"next",t)}function l(t){i(s,o,r,n,l,"throw",t)}n(void 0)}))}}var c={middleware:"auth",metaInfo:function(){return{title:"Add Donation"}},data:function(){return{message:"",wooProducts:[],form:new n.a({payment_type:"",total_amount:0,date_of_donation:"",last_name:"",first_name:"",title:"Mr",gift_aid:"",city:"",country:"",postal_code:"",contact:"",email:"",address_line1:"",address_line2:"",donationsArray:[{project:"",donation_type:"",amount:0}]}),donation_type_arr:[]}},created:function(){this.donation_type_arr=window.config.options.find((function(t){return"donation_types"===t.key})).value.split(","),this.getProjects()},methods:{project_name_computed:function(t){var e="";return e="simple"==t.type?"[One-Off]":"[Monthly]",null!=t.project_page&&""!=t.project_page?t.project_page+" - "+t.name+" - "+e:t.name+" - "+e},calculateTotal:function(){var t=this,e=0;this.form.donationsArray.forEach((function(a,o){t.form.donationsArray[o].amount=parseFloat(a.amount).toFixed(2),console.log(t.form.donationsArray[o].value,parseFloat(a.amount).toFixed(2)),e+=parseFloat(parseFloat(a.amount).toFixed(2))})),this.form.total_amount=parseFloat(e).toFixed(2)},getProjects:function(){var t=this;return l(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:axios.get("/api/getProjects").then((function(e){t.wooProducts=e.data})).catch((function(t){console.log(t)}));case 1:case"end":return e.stop()}}),e)})))()},addNewRow:function(){this.form.donationsArray.push({project:"",donation_type:"",amount:0}),this.calculateTotal()},deleteRow:function(t){this.form.donationsArray.splice(t,1),this.calculateTotal()},handleSubmit:function(){var t=this;return l(r.a.mark((function e(){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.form.post("/api/donation/store");case 2:a=e.sent,t.message=a.data.message,t.form.reset(),t.$router.push({name:"one_off_donations.customers",params:{message:t.message}});case 6:case"end":return e.stop()}}),e)})))()},clearForm:function(){this.form.reset()}}},m=(a(129),a(0)),d=Object(m.a)(c,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content-wrapper"},[a("div",{staticClass:"content-header row"},[a("div",{staticClass:"content-header-left col-md-9 col-12 mb-2"},[a("div",{staticClass:"row breadcrumbs-top"},[a("div",{staticClass:"col-12"},[a("h2",{staticClass:"content-header-title float-left mb-0"},[t._v("Add Donation")]),t._v(" "),a("div",{staticClass:"breadcrumb-wrapper col-12"},[a("ol",{staticClass:"breadcrumb"},[a("li",{staticClass:"breadcrumb-item"},[a("router-link",{attrs:{to:{name:"donations"}}},[t._v("Donations")])],1),t._v(" "),t._m(0)])])])])])]),t._v(" "),a("div",{staticClass:"content-body"},[a("section",{staticClass:"card",attrs:{id:"description"}},[a("div",{staticClass:"card-content"},[a("div",{staticClass:"card-body"},[a("form",{on:{submit:function(e){return e.preventDefault(),t.handleSubmit(e)},keydown:function(e){return t.form.onKeydown(e)}}},[a("alert-success",{attrs:{form:t.form,message:t.message}}),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[a("h3",[t._v("Donor Details")]),t._v(" "),a("fieldset",{staticClass:"form-group"},[a("label",[t._v("Title")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.form.title,expression:"form.title"}],staticClass:"form-control",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.form,"title",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"Miss"}},[t._v("Miss")]),t._v(" "),a("option",{attrs:{value:"Mr"}},[t._v("Mr")]),t._v(" "),a("option",{attrs:{value:"Mrs"}},[t._v("Mrs")]),t._v(" "),a("option",{attrs:{value:"Ms"}},[t._v("Ms")]),t._v(" "),a("option",{attrs:{value:"Dr"}},[t._v("Dr")])])]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[a("fieldset",{staticClass:"form-group"},[a("label",{attrs:{for:"first_name"}},[t._v("First Name")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.first_name,expression:"form.first_name"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("first_name")},attrs:{type:"text",id:"first_name",name:"first_name",placeholder:"First Name"},domProps:{value:t.form.first_name},on:{input:function(e){e.target.composing||t.$set(t.form,"first_name",e.target.value)}}}),t._v(" "),a("has-error",{attrs:{form:t.form,field:"first_name"}})],1)]),t._v(" "),a("div",{staticClass:"col-md-6"},[a("fieldset",{staticClass:"form-group"},[a("label",{attrs:{for:"last_name"}},[t._v("Last Name")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.last_name,expression:"form.last_name"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("last_name")},attrs:{type:"text",id:"last_name",name:"last_name",placeholder:"Last Name"},domProps:{value:t.form.last_name},on:{input:function(e){e.target.composing||t.$set(t.form,"last_name",e.target.value)}}}),t._v(" "),a("has-error",{attrs:{form:t.form,field:"last_name"}})],1)])]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[a("fieldset",{staticClass:"form-group"},[a("label",{attrs:{for:"addressline1"}},[t._v("Address Line 1")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.address_line1,expression:"form.address_line1"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("address_line1")},attrs:{type:"text",id:"address_line1",name:"address_line1",placeholder:"Address Line 1"},domProps:{value:t.form.address_line1},on:{input:function(e){e.target.composing||t.$set(t.form,"address_line1",e.target.value)}}}),t._v(" "),a("has-error",{attrs:{form:t.form,field:"address_line1"}})],1)]),t._v(" "),a("div",{staticClass:"col-md-6"},[a("fieldset",{staticClass:"form-group"},[a("label",{attrs:{for:"addressline2"}},[t._v("Address Line 2")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.address_line2,expression:"form.address_line2"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("address_line2")},attrs:{type:"text",id:"address_line2",name:"address_line2",placeholder:"Address Line 3"},domProps:{value:t.form.address_line2},on:{input:function(e){e.target.composing||t.$set(t.form,"address_line2",e.target.value)}}}),t._v(" "),a("has-error",{attrs:{form:t.form,field:"address_line2"}})],1)])]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[a("fieldset",{staticClass:"form-group"},[a("label",{attrs:{for:"city"}},[t._v("City")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.city,expression:"form.city"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("city")},attrs:{type:"text",id:"city",name:"city",placeholder:"City"},domProps:{value:t.form.city},on:{input:function(e){e.target.composing||t.$set(t.form,"city",e.target.value)}}}),t._v(" "),a("has-error",{attrs:{form:t.form,field:"city"}})],1)]),t._v(" "),a("div",{staticClass:"col-md-6"},[a("fieldset",{staticClass:"form-group"},[a("label",{attrs:{for:"postal_code"}},[t._v("Postcode")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.postal_code,expression:"form.postal_code"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("postal_code")},attrs:{type:"text",id:"postal_code",name:"postal_code",placeholder:"Postcode"},domProps:{value:t.form.postal_code},on:{input:function(e){e.target.composing||t.$set(t.form,"postal_code",e.target.value)}}}),t._v(" "),a("has-error",{attrs:{form:t.form,field:"postal_code"}})],1)])]),t._v(" "),a("fieldset",{staticClass:"form-group"},[a("label",{attrs:{for:"country"}},[t._v("Country")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.country,expression:"form.country"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("country")},attrs:{type:"text",id:"country",name:"country",placeholder:"Country (e.g GB, PK)"},domProps:{value:t.form.country},on:{input:function(e){e.target.composing||t.$set(t.form,"country",e.target.value)}}}),t._v(" "),a("has-error",{attrs:{form:t.form,field:"country"}})],1)]),t._v(" "),a("div",{staticClass:"col-md-6"},[a("h3",[t._v("Contact Details")]),t._v(" "),a("fieldset",{staticClass:"form-group"},[a("label",{attrs:{for:"email"}},[t._v("Email")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.email,expression:"form.email"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("email")},attrs:{type:"text",id:"email",name:"email",placeholder:"Email"},domProps:{value:t.form.email},on:{input:function(e){e.target.composing||t.$set(t.form,"email",e.target.value)}}}),t._v(" "),a("has-error",{attrs:{form:t.form,field:"email"}})],1),t._v(" "),a("fieldset",{staticClass:"form-group"},[a("label",{attrs:{for:"contact"}},[t._v("Contact")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.contact,expression:"form.contact"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("contact")},attrs:{type:"text",id:"contact",name:"contact",placeholder:"Contact"},domProps:{value:t.form.contact},on:{input:function(e){e.target.composing||t.$set(t.form,"contact",e.target.value)}}}),t._v(" "),a("has-error",{attrs:{form:t.form,field:"contact"}})],1),t._v(" "),a("h3",[t._v("Donation Details")]),t._v(" "),a("fieldset",{staticClass:"form-group"},[a("label",{attrs:{for:"date_of_donation"}},[t._v("Date of Donation")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.date_of_donation,expression:"form.date_of_donation"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("date_of_donation")},attrs:{type:"date",id:"date_of_donation",name:"date_of_donation",placeholder:"Date Of Donation"},domProps:{value:t.form.date_of_donation},on:{input:function(e){e.target.composing||t.$set(t.form,"date_of_donation",e.target.value)}}}),t._v(" "),a("has-error",{attrs:{form:t.form,field:"date_of_donation"}})],1),t._v(" "),a("fieldset",{staticClass:"form-group"},[a("label",{attrs:{for:"basicInput"}},[t._v("Payment Type")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.form.payment_type,expression:"form.payment_type"}],staticClass:"form-control",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.form,"payment_type",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:""}},[t._v("Please Select a Payment Type")]),t._v(" "),a("option",{attrs:{value:"Bank"}},[t._v("Bank Transfer")]),t._v(" "),a("option",{attrs:{value:"Cash"}},[t._v("Cash")]),t._v(" "),a("option",{attrs:{value:"Cheque"}},[t._v("Cheque")])])]),t._v(" "),a("fieldset",{staticClass:"form-group"},[a("label",[t._v("Gift Aid")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.form.gift_aid,expression:"form.gift_aid"}],staticClass:"form-control",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.form,"gift_aid",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:""}},[t._v("Please Select Gift Aid")]),t._v(" "),a("option",{attrs:{value:"no"}},[t._v("No")]),t._v(" "),a("option",{attrs:{value:"written"}},[t._v("Written")])])])])]),t._v(" "),a("table",{staticClass:"table table-bordered"},[t._m(1),t._v(" "),a("tbody",[t._l(t.form.donationsArray,(function(e,o){return a("tr",{key:o},[a("td",[a("fieldset",{staticClass:"form-group"},[a("label",[t._v(t._s(o+1))])])]),t._v(" "),a("td",[a("fieldset",{staticClass:"form-group"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.form.donationsArray[o].project,expression:"form.donationsArray[index].project"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("donationsArray."+o+".project")},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.form.donationsArray[o],"project",e.target.multiple?a:a[0])}}},[t._m(2,!0),t._v(" "),t._l(t.wooProducts,(function(e){return a("option",{key:"woo_project"+e.product_id,domProps:{value:e.product_id}},[a("strong",[t._v(t._s(t.project_name_computed(e)))])])}))],2),t._v(" "),a("has-error",{attrs:{form:t.form,field:"donationsArray."+o+".project"}})],1)]),t._v(" "),a("td",[a("fieldset",{staticClass:"form-group"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.form.donationsArray[o].donation_type,expression:"form.donationsArray[index].donation_type"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("donationsArray."+o+".donation_type")},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.form.donationsArray[o],"donation_type",e.target.multiple?a:a[0])}}},[t._m(3,!0),t._v(" "),t._l(t.donation_type_arr,(function(e,o){return a("option",{key:"d_type"+o,domProps:{value:e}},[t._v(t._s(t.capitalize(e)))])}))],2),t._v(" "),a("has-error",{attrs:{form:t.form,field:"donationsArray."+o+".donation_type"}})],1)]),t._v(" "),a("td",[a("div",{staticClass:"form-label-group position-relative has-icon-left"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.donationsArray[o].amount,expression:"form.donationsArray[index].amount"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("donationsArray."+o+".amount")},attrs:{type:"number",placeholder:"Amount"},domProps:{value:t.form.donationsArray[o].amount},on:{change:function(e){return t.calculateTotal()},input:function(e){e.target.composing||t.$set(t.form.donationsArray[o],"amount",e.target.value)}}}),t._v(" "),t._m(4,!0),t._v(" "),a("has-error",{attrs:{form:t.form,field:"donationsArray."+o+".amount"}})],1)]),t._v(" "),a("td",{staticClass:"text-center"},[a("fieldset",{staticClass:"form-group"},[t.form.donationsArray.length==o+1?a("i",{staticClass:"fa fa-plus",on:{click:function(e){return t.addNewRow()}}}):t._e(),t._v(" "),0!=o||t.form.donationsArray.length>1?a("i",{staticClass:"fa fa-remove",on:{click:function(e){return t.deleteRow(o)}}}):t._e()])])])})),t._v(" "),a("tr",[a("td",{staticClass:"text-right",attrs:{colspan:"4"}},[a("strong",[t._v("Total Amount: ")]),t._v(" "),a("i",{staticClass:"fa fa-gbp"}),t._v(t._s(t.form.total_amount))])])],2)]),t._v(" "),a("div",{staticClass:"d-flex justify-content-between"},[a("button",{staticClass:"btn btn-secondary mr-1 mb-1 waves-effect waves-light",attrs:{type:"button"},on:{click:t.clearForm}},[t._v("Clear")]),t._v(" "),a("v-button",{attrs:{loading:t.form.busy,type:"primary"}},[t._v("Submit")])],1)],1)])])])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("li",{staticClass:"breadcrumb-item"},[e("a",{attrs:{href:"#"}},[this._v("Add")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",{staticStyle:{background:"#ebe8e8"}},[a("tr",[a("th",[t._v("S#")]),t._v(" "),a("th",[t._v("Project")]),t._v(" "),a("th",[t._v("Donation Type")]),t._v(" "),a("th",[t._v("Amount")]),t._v(" "),a("th",{staticClass:"text-center"},[t._v("Action")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("option",{attrs:{value:""}},[e("strong",[this._v("Select Project")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("option",{attrs:{value:""}},[e("strong",[this._v("Select Type")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"form-control-position"},[e("i",{staticClass:"fa fa-gbp"})])}],!1,null,"400c40c9",null);e.default=d.exports},85:function(t,e,a){var o=a(130);"string"==typeof o&&(o=[[t.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};a(6)(o,r);o.locals&&(t.exports=o.locals)}}]);